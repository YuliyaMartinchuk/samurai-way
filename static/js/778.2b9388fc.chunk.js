"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[778],{4547:function(e,r,s){s.r(r),s.d(r,{default:function(){return We}});var n=s(1413),t=s(5671),i=s(3144),a=s(136),o=s(2882),c=s(2791),l=s(364),u=s(9271),d=s(7781),f=s(3464),p=s(4165),m=s(5861),h=s(3757),_=function(e){return{type:h.fw,payload:{status:e}}},v=s(2381),x=s(7575),j=s(6460),N=function(e){return function(){var r=(0,m.Z)((0,p.Z)().mark((function r(s){var n;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.FZ.getProfile(e);case 2:n=r.sent,s((t=n.data,{type:h.cF,payload:{profile:t}}));case 4:case"end":return r.stop()}var t}),r)})));return function(e){return r.apply(this,arguments)}}()},P={profileUserCard:"Profileinfo_profileUserCard__Bk-h0",profileUserCardImage:"Profileinfo_profileUserCardImage__4kCgn",backgroundImage:"Profileinfo_backgroundImage__VKJ7F",avatar:"Profileinfo_avatar__yc+8Q",descriptionBlock:"Profileinfo_descriptionBlock__DV-dO",contacts:"Profileinfo_contacts__RvWpJ",description:"Profileinfo_description__wVWFe",profileAvatar:"Profileinfo_profileAvatar__DcclC",fileInput:"Profileinfo_fileInput__bdZNQ",fileInputLabel:"Profileinfo_fileInputLabel__f3E8A",fileInputIcon:"Profileinfo_fileInputIcon__q6FME"},g=s.p+"static/media/backgroundImage.522c71481d4e78bb0ace.jpg",Z=s(2613),b=s.p+"static/media/defaultUserPhoto.48161ffe784f0589388e.jpg",k=s(184),y=(c.Component,s(885)),F="ProfileStatus_container__lFEbT",C="ProfileStatus_status__UFkkW",w="ProfileStatus_input__jFkX3",I=function(e){var r=e.status,s=e.updateStatus,n=(0,c.useState)(!1),t=(0,y.Z)(n,2),i=t[0],a=t[1],o=(0,c.useState)(r),l=(0,y.Z)(o,2),u=l[0],d=l[1];(0,c.useEffect)((function(){d(r)}),[r]);return(0,k.jsxs)("div",{className:F,children:[!i&&(0,k.jsx)("div",{children:(0,k.jsx)("span",{className:C,onDoubleClick:function(){a(!0)},children:e.status||"No status"})}),i&&(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:w,autoFocus:!0,onBlur:function(){a(!1),s(u)},onChange:function(e){d(e.currentTarget.value)},value:u})})]})};var S=s.p+"static/media/editIcon.1eeae1f4fdc99797976b21afb2d76001.svg",A=function(e){var r=e.profile,s=e.status,n=e.updateStatus,t=e.isOwner,i=e.savePhoto;if(!r)return(0,k.jsx)(Z.p,{});return(0,k.jsxs)("div",{className:P.profileUserCard,children:[(0,k.jsxs)("div",{className:P.profileUserCardImage,children:[(0,k.jsx)("img",{className:P.backgroundImage,src:g,alt:"background image"}),(0,k.jsxs)("div",{className:P.profileAvatar,children:[(0,k.jsx)("img",{className:P.avatar,src:(null===r||void 0===r?void 0:r.photos.large)||b,alt:"profile photo"}),t&&(0,k.jsxs)("label",{htmlFor:"mainPhotoInput",className:P.fileInputLabel,children:[(0,k.jsx)("input",{id:"mainPhotoInput",type:"file",onChange:function(e){e.target.files&&i(e.target.files[0])},className:P.fileInput}),(0,k.jsx)("img",{className:P.fileInputIcon,src:S,alt:"editIcon"})]})]}),(0,k.jsx)("h1",{className:P.profileName,children:r.fullName})]}),(0,k.jsx)(I,{status:s,updateStatus:n})]})},U="MyPosts_postsBlock__zkHB8",O="MyPosts_postForm__loYIZ",D={container:"Post_container__-GKmx",likes:"Post_likes__6q5Dg",likesIcon:"Post_likesIcon__b8ylZ",likesCount:"Post_likesCount__r2E99"},B="PostHeader_container__CYhyd",E="PostHeader_user__Gh4ee",M="PostHeader_user__image__Mwp9q",T="PostHeader_user__avatar__CBMEG",G="PostHeader_user__Name__xCQdB",H=function(e){var r=e.profile;return r?(0,k.jsx)("div",{className:B,children:(0,k.jsxs)("div",{className:E,children:[(0,k.jsx)("div",{className:M,children:(0,k.jsx)("img",{className:T,src:r.photos.large||b,alt:"user-avatar"})}),(0,k.jsx)("span",{className:G,children:r.fullName})]})}):(0,k.jsx)(Z.p,{})};var J=s.p+"static/media/icon-heart.fce797cc4ec96c2a21b62e4497ebe2e0.svg",W=function(e){var r=e.profile,s=e.post;return(0,k.jsxs)("div",{className:D.container,children:[(0,k.jsx)(H,{profile:r}),(0,k.jsx)("div",{className:D.item,children:s.message}),(0,k.jsxs)("div",{className:D.likes,children:[(0,k.jsx)("img",{className:D.likesIcon,src:J,alt:"icon-likes"}),(0,k.jsx)("span",{className:D.likesCount,children:s.likesCount})]})]})},L=s(6139),V=s(704),K=s(5298),Q=s(1117),R="PostsForm_container__z75CO",z="PostsForm_textarea__1xm3K",q="PostsForm_buttonBlock__2GEZ4",X="PostsForm_button__UJUAT",Y=(0,K.D)(10),$=(0,V.Z)({form:"addPostForm"})((function(e){return(0,k.jsx)("div",{className:R,children:(0,k.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,k.jsx)("div",{children:(0,k.jsx)(L.Z,{placeholder:"What's new with you?",name:"newPostText",className:z,component:Q.gx,validate:[K.C,Y]})}),(0,k.jsx)("div",{className:q,children:(0,k.jsx)("button",{className:X,children:"Add post"})})]})})})),ee=c.memo((function(e){var r=e.profile,s=e.posts.map((function(e,s){return(0,k.jsx)(W,{post:e,profile:r},s)}));return(0,k.jsxs)("div",{className:U,children:[(0,k.jsxs)("div",{className:O,children:[(0,k.jsx)(H,{profile:r}),(0,k.jsx)($,{onSubmit:function(r){e.addPost(r.newPostText)}})]}),(0,k.jsx)("div",{children:s})]})})),re=(0,l.$j)((function(e){return{posts:e.profilePage.posts,profile:e.profilePage.profile}}),(function(e){return{addPost:function(r){e(function(e){return{type:h.RO,newPostText:e}}(r))}}}))(ee),se=s(9234),ne="ProfileData_container__aA22r",te="ProfileData_info__+73ZL",ie="ProfileData_contacts__DU6uw",ae="ProfileData_description__HIV4E",oe="ProfileData_editButton__BHwzV",ce="ProfileData_checkbox__+v23a",le="ProfileData_textarea__Wg0pU",ue=(0,V.Z)({form:"edit-profile"})((function(e){var r=e.profile,s=e.handleSubmit,n=e.error;return(0,k.jsxs)("form",{className:ne,onSubmit:s,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"Full name: "})," ",(0,Q.Gr)("Full name","fullName",[],Q.II,{className:le}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"Looking for a job: "}),(0,Q.Gr)("","lookingForAJob",[],Q.II,{type:"checkbox",className:ce})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"My professional skills: "}),(0,Q.Gr)("My professional skills","lookingForAJobDescription",[],Q.gx,{className:le})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"About me: "}),(0,Q.Gr)("About me","aboutMe",[],Q.gx,{className:le})]}),(null===r||void 0===r?void 0:r.contacts)&&(0,k.jsxs)("div",{className:ae,children:[(0,k.jsx)("div",{className:ae,children:"Contacts: "})," ",Object.keys(r.contacts).map((function(e){return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:ae,children:[e,": "]}),(0,Q.Gr)(e,"contacts."+e,[],Q.II,{className:le})]},e)}))]})]})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:oe,children:"save"})}),n&&(0,k.jsx)("div",{className:se.Z.formSummaryError,children:n})]})})),de="AboutMe_container__kYgAO",fe="AboutMe_title__UTGND",pe="Contact_contacts__0sUB8",me="Contact_contactTitle__SuxKp",he="Contact_contact__80XWw",_e=function(e){var r=e.contactTitle,s=e.contactValue;return(0,k.jsxs)("div",{className:pe,children:[(0,k.jsxs)("div",{className:me,children:[r,":"]}),(0,k.jsx)("div",{className:he,children:(0,k.jsx)("a",{href:null!==s?s:"",children:s})})]})},ve=function(e){var r=e.profile,s=e.isOwner,n=e.goToEditMode;return(0,k.jsxs)("div",{className:ne,children:[(0,k.jsx)("div",{className:ae,children:"Full name:"}),(0,k.jsx)("div",{className:te,children:null===r||void 0===r?void 0:r.fullName}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"Looking for a job:"}),(0,k.jsx)("div",{className:te,children:null!==r&&void 0!==r&&r.lookingForAJob?"Yes":"No"})]}),(null===r||void 0===r?void 0:r.lookingForAJob)&&(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"My professional skills:"}),(0,k.jsx)("div",{className:te,children:null===r||void 0===r?void 0:r.lookingForAJobDescription})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"About me:"}),(0,k.jsx)("div",{className:te,children:null===r||void 0===r?void 0:r.aboutMe})]}),(null===r||void 0===r?void 0:r.contacts)&&(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:ae,children:"Contacts:"}),(0,k.jsx)("div",{className:ie,children:Object.entries(r.contacts).map((function(e){var s=(0,y.Z)(e,2),n=s[0];return s[1]&&(0,k.jsx)(_e,{contactTitle:n,contactValue:r.contacts[n]},n)}))})]}),(0,k.jsx)("div",{children:s&&(0,k.jsx)("button",{className:oe,onClick:n,children:"Edit"})})]})},xe=function(e){var r=e.profile,s=e.isOwner,n=e.saveProfile,t=(0,c.useState)(!1),i=(0,y.Z)(t,2),a=i[0],o=i[1];if(!r)return(0,k.jsx)(Z.p,{});return(0,k.jsxs)("div",{className:de,children:[(0,k.jsx)("h3",{className:fe,children:"About Me:"}),a?(0,k.jsx)(ue,{profile:r,initialValues:r,onSubmit:function(e){n(e).then((function(){return o(!1)}))}}):(0,k.jsx)(ve,{profile:r,isOwner:s,goToEditMode:function(){o(!0)}})]})},je="Friends_container__bdJJ7",Ne="Friends_friendsHeader__4Q9O-",Pe="Friends_friendsCount__QbtQo",ge="Friends_seeAll__zD5HW",Ze="Friends_items__N7ISr",be="Friends_friendsButton__BXmgB",ke=s(1523),ye=s(2554),Fe="Friend_item__SBOc1",Ce="Friend_img__e4cBj",we="Friend_userName__3VKUC",Ie=function(e){var r=e.friend;return(0,k.jsx)(ke.OL,{to:"/profile/".concat(r.id),children:(0,k.jsx)("div",{children:(0,k.jsxs)("div",{className:Fe,children:[(0,k.jsx)("img",{className:Ce,src:r.photos.large||ye,alt:"avatar-friend"}),(0,k.jsx)("span",{className:we,children:r.name})]})},r.id)})},Se=function(e){var r=e.users,s=(0,c.useState)(!1),n=(0,y.Z)(s,2),t=n[0],i=n[1],a=function(){return i(!t)},o=t?r:r.slice(0,6);return(0,k.jsxs)("div",{className:je,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{children:"Friends"}),(0,k.jsxs)("div",{className:Ne,children:[(0,k.jsxs)("div",{className:Pe,children:[r.length," Friends"]}),(0,k.jsx)("div",{className:ge,children:t?(0,k.jsx)("a",{onClick:a,children:"Hide friends"}):(0,k.jsx)("a",{onClick:a,children:"See all"})})]})]}),(0,k.jsx)("div",{className:Ze,children:o.map((function(e){return(0,k.jsx)(Ie,{friend:e},e.id)}))}),t?(0,k.jsx)("button",{onClick:a,className:be,children:"Hide friends"}):(0,k.jsx)("button",{onClick:a,className:be,children:"See all"})]})},Ae="ProfileSidebar_container__6vytU",Ue=function(e){var r=e.profile,s=e.isOwner,n=e.saveProfile,t=e.users;return(0,k.jsxs)("div",{className:Ae,children:[(0,k.jsx)(xe,{profile:r,isOwner:s,saveProfile:n}),(0,k.jsx)(Se,{users:t})]})},Oe="Profile_container__FoxW2",De="Profile_content__xRBAJ",Be="Profile_timeline__1ajy8",Ee="Profile_sidebar__m8muy",Me="Profile_items__R6vsF",Te=function(e){var r=e.profile,s=e.status,n=e.updateStatus,t=e.isOwner,i=e.savePhoto,a=e.saveProfile,o=e.users;return(0,k.jsx)("div",{className:Oe,children:(0,k.jsxs)("div",{className:De,children:[(0,k.jsx)(A,{profile:r,status:s,updateStatus:n,isOwner:t,savePhoto:i}),(0,k.jsxs)("div",{className:Me,children:[(0,k.jsx)("div",{className:Be,children:(0,k.jsx)("div",{children:(0,k.jsx)(re,{})})}),(0,k.jsx)("div",{className:Ee,children:(0,k.jsx)(Ue,{profile:r,isOwner:t,saveProfile:a,users:o})})]})]})})},Ge=s(2505),He=s(3317),Je=function(e){(0,a.Z)(s,e);var r=(0,o.Z)(s);function s(){return(0,t.Z)(this,s),r.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=String(this.props.authorizedUserId))||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile(),this.props.getUsers(1,10,{term:"",friend:!0})}},{key:"componentDidUpdate",value:function(e,r,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,k.jsx)(Te,(0,n.Z)((0,n.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,users:this.props.users}))}}]),s}(c.Component),We=(0,d.qC)((0,l.$j)((function(e){return{profilePage:e.profilePage,profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth,users:(0,Ge.Rf)(e)}}),{getUserProfile:N,getUserStatus:function(e){return function(){var r=(0,m.Z)((0,p.Z)().mark((function r(s){var n;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.FZ.getStatus(e);case 2:n=r.sent,s(_(n.data));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},updateStatus:function(e){return function(){var r=(0,m.Z)((0,p.Z)().mark((function r(s){return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.FZ.updateStatus(e);case 2:r.sent.data.resultCode===j.A.Success&&s(_(e));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},savePhoto:function(e){return function(){var r=(0,m.Z)((0,p.Z)().mark((function r(s){var n;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.FZ.savePhoto(e);case 2:(n=r.sent).data.resultCode===j.A.Success&&s((t=n.data.data.photos,{type:h.Wj,payload:{photos:t}}));case 4:case"end":return r.stop()}var t}),r)})));return function(e){return r.apply(this,arguments)}}()},saveProfile:function(e){return function(){var r=(0,m.Z)((0,p.Z)().mark((function r(s,n){var t,i;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=n().auth.userId){r.next=4;break}return console.warn("userId not found"),r.abrupt("return");case 4:return r.next=6,x.FZ.saveProfile(e);case 6:if((i=r.sent).data.resultCode!==j.A.Success){r.next=11;break}s(N(String(t))),r.next=13;break;case 11:return s((0,v.GK)("edit-profile",{_error:i.data.messages[0]||"Incorrect data"})),r.abrupt("return",Promise.reject(i.data.messages[0]));case 13:case"end":return r.stop()}}),r)})));return function(e,s){return r.apply(this,arguments)}}()},getUsers:He.Zw}),u.EN,f.F)(Je)},1117:function(e,r,s){s.d(r,{Gr:function(){return p},II:function(){return f},gx:function(){return d}});var n=s(6459),t=s(1413),i=s(5987),a=(s(2791),s(6139)),o=s(9234),c=s(184),l=["input","meta","FormType"],u=function(e){var r=e.input,s=e.meta,n=e.FormType,a=(0,i.Z)(e,l),u=s.error&&s.touched;return(0,c.jsxs)("div",{className:o.Z.formControl+" "+(u?o.Z.error:""),children:[(0,c.jsx)("div",{children:(0,c.jsx)(n,(0,t.Z)((0,t.Z)({},r),a))}),u&&(0,c.jsx)("span",{children:s.error})]})},d=function(e){var r=Object.assign({},((0,n.Z)(e),e));return(0,c.jsx)(u,(0,t.Z)((0,t.Z)({},r),{},{FormType:"textarea"}))},f=function(e){var r=Object.assign({},((0,n.Z)(e),e));return(0,c.jsx)(u,(0,t.Z)((0,t.Z)({},r),{},{FormType:"input"}))};function p(e,r,s,n,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,c.jsxs)("div",{className:o.Z.createFieldRoot,children:[(0,c.jsx)(a.Z,(0,t.Z)({placeholder:e,name:r,component:n,validate:s},i))," ",l]})}},3464:function(e,r,s){s.d(r,{F:function(){return u}});var n=s(1413),t=s(5987),i=s(9271),a=s(364),o=(s(2791),s(184)),c=["isAuth"],l=function(e){return{isAuth:e.auth.isAuth}};function u(e){return(0,a.$j)(l)((function(r){var s=r.isAuth,a=(0,t.Z)(r,c);return s?(0,o.jsx)(e,(0,n.Z)({},a)):(0,o.jsx)(i.l_,{to:"/login"})}))}},3317:function(e,r,s){s.d(r,{FL:function(){return v},iR:function(){return x},Zw:function(){return _},NK:function(){return j}});var n=s(4165),t=s(5861),i=s(3757),a=function(e){return{type:i.Gd,payload:{userId:e}}},o=function(e){return{type:i.E$,payload:{userId:e}}},c=function(e){return{type:i.Wr,payload:{users:e}}},l=function(e){return{type:i.Nc,payload:{currentPage:e}}},u=function(e){return{type:i.E7,payload:{isFetching:e}}},d=function(e,r){return{type:i.S,payload:{isFetching:e,userId:r}}},f=function(e){return{type:i.p4,payload:e}},p=s(6460),m=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(r,s,t,i){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(d(!0,s)),e.next=3,t(s);case 3:(null===(a=e.sent)||void 0===a?void 0:a.resultCode)===p.A.Success&&r(i(s)),r(d(!1,s));case 6:case"end":return e.stop()}}),e)})));return function(r,s,n,t){return e.apply(this,arguments)}}(),h=s(7575),_=function(e,r,s){return function(){var a=(0,t.Z)((0,n.Z)().mark((function t(a){var o;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(u(!0)),a(l(e)),a(f(s)),n.next=5,h.h3.getUsers(e,r,s.term,s.friend);case 5:o=n.sent,a(u(!1)),a(c(o.items)),a((t=o.totalCount,{type:i.mP,payload:{totalCount:t}}));case 9:case"end":return n.stop()}var t}),t)})));return function(e){return a.apply(this,arguments)}}()},v=function(e,r){return function(){var s=(0,t.Z)((0,n.Z)().mark((function s(t){var i;return(0,n.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(u(!0)),t(l(e)),s.next=4,h.h3.getUsers(e,r);case 4:i=s.sent,t(u(!1)),t(c(i.items));case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},x=function(e){return function(){var r=(0,t.Z)((0,n.Z)().mark((function r(s){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m(s,e,h.h3.follow.bind(h.h3),a);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},j=function(e){return function(){var r=(0,t.Z)((0,n.Z)().mark((function r(s){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m(s,e,h.h3.unFollow.bind(h.h3),o);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},5298:function(e,r,s){s.d(r,{C:function(){return n},D:function(){return t}});var n=function(e){if(!e)return"Field is required"},t=function(e){return function(r){if(r&&r.length>e)return"Max length is ".concat(e," symbols")}}},9234:function(e,r){r.Z={formControl:"FormsControls_formControl__ZFy6E",error:"FormsControls_error__Ph5O6",formSummaryError:"FormsControls_formSummaryError__iiPnC",blink1:"FormsControls_blink1__XLlQ+"}}}]);
//# sourceMappingURL=778.2b9388fc.chunk.js.map