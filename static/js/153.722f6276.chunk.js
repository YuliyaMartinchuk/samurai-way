"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[153],{8399:function(e,r,n){n.r(r),n.d(r,{default:function(){return Oe}});var t=n(1413),s=n(5671),i=n(3144),a=n(136),o=n(2882),u=n(2791),c=n(364),l=n(9271),d=n(7781),f=n(3464),p=n(4165),h=n(5861),v=n(4461),m=n(3757),_=function(e){return{type:m.fw,payload:{status:e}}},x=n(2381),j=function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){var t;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.getProfile(e);case 2:t=r.sent,n((s=t.data,{type:m.cF,payload:{profile:s}}));case 4:case"end":return r.stop()}var s}),r)})));return function(e){return r.apply(this,arguments)}}()},g={profileUserCard:"Profileinfo_profileUserCard__Bk-h0",profileUserCardImage:"Profileinfo_profileUserCardImage__4kCgn",backgroundImage:"Profileinfo_backgroundImage__VKJ7F",avatar:"Profileinfo_avatar__yc+8Q",descriptionBlock:"Profileinfo_descriptionBlock__DV-dO",status:"Profileinfo_status__tfxjw",contacts:"Profileinfo_contacts__RvWpJ",description:"Profileinfo_description__wVWFe"},y=n.p+"static/media/backgroundImage.522c71481d4e78bb0ace.jpg",N=n(3445),P=n(9196),b=n(885),k=n(184),Z=function(e){var r=e.status,n=e.updateStatus,t=(0,u.useState)(!1),s=(0,b.Z)(t,2),i=s[0],a=s[1],o=(0,u.useState)(r),c=(0,b.Z)(o,2),l=c[0],d=c[1];(0,u.useEffect)((function(){d(r)}),[r]);return(0,k.jsxs)("div",{children:[!i&&(0,k.jsx)("div",{children:(0,k.jsx)("span",{className:g.status,onDoubleClick:function(){a(!0)},children:e.status||"No status"})}),i&&(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:g.status,autoFocus:!0,onBlur:function(){a(!1),n(l)},onChange:function(e){d(e.currentTarget.value)},value:l})})]})},F=function(e){var r=e.profile,n=e.status,t=e.updateStatus,s=e.isOwner,i=e.savePhoto;if(!r)return(0,k.jsx)(N.p,{});return(0,k.jsxs)("div",{className:g.profileUserCard,children:[(0,k.jsxs)("div",{className:g.profileUserCardImage,children:[(0,k.jsx)("img",{className:g.backgroundImage,src:y,alt:"background image"}),(0,k.jsx)("img",{className:g.avatar,src:(null===r||void 0===r?void 0:r.photos.large)||P,alt:"profile photo"}),(0,k.jsx)("div",{children:s&&(0,k.jsx)("input",{type:"file",onChange:function(e){e.target.files&&i(e.target.files[0])}})}),(0,k.jsx)("h1",{className:g.profileName,children:r.fullName})]}),(0,k.jsx)(Z,{status:n,updateStatus:t})]})},C="MyPosts_postsBlock__zkHB8",w="MyPosts_postForm__loYIZ",S={container:"Post_container__-GKmx",likes:"Post_likes__6q5Dg",likesIcon:"Post_likesIcon__b8ylZ",likesCount:"Post_likesCount__r2E99"},I="PostHeader_container__CYhyd",A="PostHeader_user__Gh4ee",O="PostHeader_user__image__Mwp9q",U="PostHeader_user__avatar__CBMEG",D="PostHeader_user__Name__xCQdB",E=function(e){var r=e.profile;return r?(0,k.jsx)("div",{className:I,children:(0,k.jsxs)("div",{className:A,children:[(0,k.jsx)("div",{className:O,children:(0,k.jsx)("img",{className:U,src:r.photos.large||P,alt:"user-avatar"})}),(0,k.jsx)("span",{className:D,children:r.fullName})]})}):(0,k.jsx)(N.p,{})};var B=n.p+"static/media/icon-heart.fce797cc4ec96c2a21b62e4497ebe2e0.svg",M=function(e){var r=e.profile,n=e.post;return(0,k.jsxs)("div",{className:S.container,children:[(0,k.jsx)(E,{profile:r}),(0,k.jsx)("div",{className:S.item,children:n.message}),(0,k.jsxs)("div",{className:S.likes,children:[(0,k.jsx)("img",{className:S.likesIcon,src:B,alt:"icon-likes"}),(0,k.jsx)("span",{className:S.likesCount,children:n.likesCount})]})]})},T=n(6139),G=n(704),H=n(5298),z=n(1117),J="PostsForm_container__z75CO",R="PostsForm_textarea__1xm3K",V="PostsForm_buttonBlock__2GEZ4",q="PostsForm_button__UJUAT",W=(0,H.D)(10),Q=(0,G.Z)({form:"addPostForm"})((function(e){return(0,k.jsx)("div",{className:J,children:(0,k.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,k.jsx)("div",{children:(0,k.jsx)(T.Z,{placeholder:"What's new with you?",name:"newPostText",className:R,component:z.gx,validate:[H.C,W]})}),(0,k.jsx)("div",{className:V,children:(0,k.jsx)("button",{className:q,children:"Add post"})})]})})})),K=u.memo((function(e){var r=e.profile,n=e.posts.map((function(e,n){return(0,k.jsx)(M,{post:e,profile:r},n)}));return(0,k.jsxs)("div",{className:C,children:[(0,k.jsxs)("div",{className:w,children:[(0,k.jsx)(E,{profile:r}),(0,k.jsx)(Q,{onSubmit:function(r){e.addPost(r.newPostText)}})]}),(0,k.jsx)("div",{children:n})]})})),L=(0,c.$j)((function(e){return{posts:e.profilePage.posts,profile:e.profilePage.profile}}),(function(e){return{addPost:function(r){e(function(e){return{type:m.RO,newPostText:e}}(r))}}}))(K),Y=n(9234),$="ProfileData_container__aA22r",X="ProfileData_info__+73ZL",ee="ProfileData_contacts__DU6uw",re="ProfileData_description__HIV4E",ne="ProfileData_editButton__BHwzV",te="ProfileData_checkbox__+v23a",se="ProfileData_textarea__Wg0pU",ie=(0,G.Z)({form:"edit-profile"})((function(e){var r=e.profile,n=e.handleSubmit,t=e.error;return(0,k.jsxs)("form",{className:$,onSubmit:n,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"Full name: "})," ",(0,z.Gr)("Full name","fullName",[],z.II,{className:se}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"Looking for a job: "}),(0,z.Gr)("","lookingForAJob",[],z.II,{type:"checkbox",className:te})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"My professional skills: "}),(0,z.Gr)("My professional skills","lookingForAJobDescription",[],z.gx,{className:se})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"About me: "}),(0,z.Gr)("About me","aboutMe",[],z.gx,{className:se})]}),(null===r||void 0===r?void 0:r.contacts)&&(0,k.jsxs)("div",{className:re,children:[(0,k.jsx)("div",{className:re,children:"Contacts: "})," ",Object.keys(r.contacts).map((function(e){return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{children:[e,": "]}),(0,z.Gr)(e,"contacts."+e,[],z.II,{className:se})]},e)}))]})]})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:ne,children:"save"})}),t&&(0,k.jsx)("div",{className:Y.Z.formSummaryError,children:t})]})})),ae="AboutMe_container__kYgAO",oe="AboutMe_title__UTGND",ue=function(e){var r=e.contactTitle,n=e.contactValue;return(0,k.jsxs)("div",{children:[(0,k.jsxs)("span",{children:[r,": "]}),n]})},ce=function(e){var r=e.profile,n=e.isOwner,t=e.goToEditMode;return(0,k.jsxs)("div",{className:$,children:[(0,k.jsx)("div",{className:re,children:"Full name:"}),(0,k.jsx)("div",{className:X,children:null===r||void 0===r?void 0:r.fullName}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"Looking for a job:"}),(0,k.jsx)("div",{className:X,children:null!==r&&void 0!==r&&r.lookingForAJob?"Yes":"No"})]}),(null===r||void 0===r?void 0:r.lookingForAJob)&&(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"My professional skills:"}),(0,k.jsx)("div",{className:X,children:null===r||void 0===r?void 0:r.lookingForAJobDescription})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"About me:"}),(0,k.jsx)("div",{className:X,children:null===r||void 0===r?void 0:r.aboutMe})]}),(null===r||void 0===r?void 0:r.contacts)&&(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:re,children:"Contacts:"}),(0,k.jsx)("div",{className:ee,children:Object.entries(r.contacts).map((function(e){var n=(0,b.Z)(e,2),t=n[0];return n[1]&&(0,k.jsx)(ue,{contactTitle:t,contactValue:r.contacts[t]},t)}))})]}),(0,k.jsx)("div",{children:n&&(0,k.jsx)("button",{className:ne,onClick:t,children:"edit"})})]})},le=function(e){var r=e.profile,n=e.isOwner,t=e.saveProfile,s=(0,u.useState)(!1),i=(0,b.Z)(s,2),a=i[0],o=i[1];if(!r)return(0,k.jsx)(N.p,{});return(0,k.jsxs)("div",{className:ae,children:[(0,k.jsx)("h3",{className:oe,children:"About Me:"}),a?(0,k.jsx)(ie,{profile:r,initialValues:r,onSubmit:function(e){t(e).then((function(){return o(!1)}))}}):(0,k.jsx)(ce,{profile:r,isOwner:n,goToEditMode:function(){o(!0)}})]})},de="Friends_container__bdJJ7",fe="Friends_friendsHeader__4Q9O-",pe="Friends_friendsCount__QbtQo",he="Friends_seeAll__zD5HW",ve="Friends_items__N7ISr",me="Friends_friendsButton__BXmgB",_e=n(1523),xe="Friend_item__SBOc1",je="Friend_img__e4cBj",ge="Friend_userName__3VKUC",ye=function(e){var r=e.friend;return(0,k.jsx)(_e.OL,{to:"/profile/".concat(r.id),children:(0,k.jsx)("div",{children:(0,k.jsxs)("div",{className:xe,children:[(0,k.jsx)("img",{className:je,src:r.photos.large||P,alt:"avatar-friend"}),(0,k.jsx)("span",{className:ge,children:r.name})]})},r.id)})},Ne=function(e){var r=e.users,n=(0,u.useState)(!1),t=(0,b.Z)(n,2),s=t[0],i=t[1],a=function(){return i(!s)},o=s?r:r.slice(0,6);return(0,k.jsxs)("div",{className:de,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{children:"Friends"}),(0,k.jsxs)("div",{className:fe,children:[(0,k.jsxs)("div",{className:pe,children:[r.length," Friends"]}),(0,k.jsx)("div",{className:he,children:s?(0,k.jsx)("a",{onClick:a,children:"Hide friends"}):(0,k.jsx)("a",{onClick:a,children:"See all"})})]})]}),(0,k.jsx)("div",{className:ve,children:o.map((function(e){return(0,k.jsx)(ye,{friend:e},e.id)}))}),s?(0,k.jsx)("button",{onClick:a,className:me,children:"Hide friends"}):(0,k.jsx)("button",{onClick:a,className:me,children:"See all"})]})},Pe="ProfileSidebar_container__6vytU",be=function(e){var r=e.profile,n=e.isOwner,t=e.saveProfile,s=e.users;return(0,k.jsxs)("div",{className:Pe,children:[(0,k.jsx)(le,{profile:r,isOwner:n,saveProfile:t}),(0,k.jsx)(Ne,{users:s})]})},ke="Profile_container__FoxW2",Ze="Profile_content__xRBAJ",Fe="Profile_timeline__1ajy8",Ce="Profile_sidebar__m8muy",we="Profile_items__R6vsF",Se=function(e){var r=e.profile,n=e.status,t=e.updateStatus,s=e.isOwner,i=e.savePhoto,a=e.saveProfile,o=e.users;return(0,k.jsx)("div",{className:ke,children:(0,k.jsxs)("div",{className:Ze,children:[(0,k.jsx)(F,{profile:r,status:n,updateStatus:t,isOwner:s,savePhoto:i}),(0,k.jsxs)("div",{className:we,children:[(0,k.jsx)("div",{className:Fe,children:(0,k.jsx)("div",{children:(0,k.jsx)(L,{})})}),(0,k.jsx)("div",{className:Ce,children:(0,k.jsx)(be,{profile:r,isOwner:s,saveProfile:a,users:o})})]})]})})},Ie=n(2505),Ae=function(e){(0,a.Z)(n,e);var r=(0,o.Z)(n);function n(){return(0,s.Z)(this,n),r.apply(this,arguments)}return(0,i.Z)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,r,n){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,k.jsx)(Se,(0,t.Z)((0,t.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,users:this.props.users}))}}]),n}(u.Component),Oe=(0,d.qC)((0,c.$j)((function(e){return{profilePage:e.profilePage,profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth,users:(0,Ie.Rf)(e)}}),{getUserProfile:j,getUserStatus:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){var t;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.getStatus(e);case 2:t=r.sent,n(_(t.data));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},updateStatus:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.updateStatus(e);case 2:0===r.sent.data.resultCode&&n(_(e));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},savePhoto:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){var t;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.savePhoto(e);case 2:0===(t=r.sent).data.resultCode&&n((s=t.data.data.photos,{type:m.Wj,payload:{photos:s}}));case 4:case"end":return r.stop()}var s}),r)})));return function(e){return r.apply(this,arguments)}}()},saveProfile:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n,t){var s,i;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=t().auth.userId){r.next=4;break}return console.warn("userId not found"),r.abrupt("return");case 4:return r.next=6,v.FZ.saveProfile(e);case 6:if(0!==(i=r.sent).data.resultCode){r.next=11;break}n(j(s)),r.next=13;break;case 11:return n((0,x.GK)("edit-profile",{_error:i.data.messages[0]||"Incorrect data"})),r.abrupt("return",Promise.reject(i.data.messages[0]));case 13:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}()}}),l.EN,f.F)(Ae)},1117:function(e,r,n){n.d(r,{Gr:function(){return p},II:function(){return f},gx:function(){return d}});var t=n(6459),s=n(1413),i=n(5987),a=(n(2791),n(6139)),o=n(9234),u=n(184),c=["input","meta","FormType"],l=function(e){var r=e.input,n=e.meta,t=e.FormType,a=(0,i.Z)(e,c),l=n.error&&n.touched;return(0,u.jsxs)("div",{className:o.Z.formControl+" "+(l?o.Z.error:""),children:[(0,u.jsx)("div",{children:(0,u.jsx)(t,(0,s.Z)((0,s.Z)({},r),a))}),l&&(0,u.jsx)("span",{children:n.error})]})},d=function(e){var r=Object.assign({},((0,t.Z)(e),e));return(0,u.jsx)(l,(0,s.Z)((0,s.Z)({},r),{},{FormType:"textarea"}))},f=function(e){var r=Object.assign({},((0,t.Z)(e),e));return(0,u.jsx)(l,(0,s.Z)((0,s.Z)({},r),{},{FormType:"input"}))};function p(e,r,n,t,i){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,u.jsxs)("div",{className:o.Z.createFieldRoot,children:[(0,u.jsx)(a.Z,(0,s.Z)({placeholder:e,name:r,component:t,validate:n},i))," ",c]})}},3464:function(e,r,n){n.d(r,{F:function(){return l}});var t=n(1413),s=n(5987),i=n(9271),a=n(364),o=(n(2791),n(184)),u=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function l(e){return(0,a.$j)(c)((function(r){var n=r.isAuth,a=(0,s.Z)(r,u);return n?(0,o.jsx)(e,(0,t.Z)({},a)):(0,o.jsx)(i.l_,{to:"/login"})}))}},2505:function(e,r,n){n.d(r,{FZ:function(){return d},yg:function(){return p},ab:function(){return f},b7:function(){return c},qZ:function(){return l},Rf:function(){return u}});var t="NOT_FOUND";var s=function(e,r){return e===r};function i(e,r){var n="object"===typeof r?r:{equalityCheck:r},i=n.equalityCheck,a=void 0===i?s:i,o=n.maxSize,u=void 0===o?1:o,c=n.resultEqualityCheck,l=function(e){return function(r,n){if(null===r||null===n||r.length!==n.length)return!1;for(var t=r.length,s=0;s<t;s++)if(!e(r[s],n[s]))return!1;return!0}}(a),d=1===u?function(e){var r;return{get:function(n){return r&&e(r.key,n)?r.value:t},put:function(e,n){r={key:e,value:n}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}}(l):function(e,r){var n=[];function s(e){var s=n.findIndex((function(n){return r(e,n.key)}));if(s>-1){var i=n[s];return s>0&&(n.splice(s,1),n.unshift(i)),i.value}return t}return{get:s,put:function(r,i){s(r)===t&&(n.unshift({key:r,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(u,l);function f(){var r=d.get(arguments);if(r===t){if(r=e.apply(null,arguments),c){var n=d.getEntries().find((function(e){return c(e.value,r)}));n&&(r=n.value)}d.put(arguments,r)}return r}return f.clearCache=function(){return d.clear()},f}function a(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return function(){for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];var i,a=0,o={memoizeOptions:void 0},u=t.pop();if("object"===typeof u&&(o=u,u=t.pop()),"function"!==typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var c=o.memoizeOptions,l=void 0===c?n:c,d=Array.isArray(l)?l:[l],f=function(e){var r=Array.isArray(e[0])?e[0]:e;if(!r.every((function(e){return"function"===typeof e}))){var n=r.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return r}(t),p=e.apply(void 0,[function(){return a++,u.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],r=f.length,n=0;n<r;n++)e.push(f[n].apply(null,arguments));return i=p.apply(null,e)}));return Object.assign(h,{resultFunc:u,memoizedResultFunc:p,dependencies:f,lastResult:function(){return i},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),h}}var o=a(i),u=o((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),c=function(e){return e.usersPage.pageSize},l=function(e){return e.usersPage.totalUsersCount},d=function(e){return e.usersPage.currentPage},f=function(e){return e.usersPage.isFetching},p=function(e){return e.usersPage.followingInProgress}},5298:function(e,r,n){n.d(r,{C:function(){return t},D:function(){return s}});var t=function(e){if(!e)return"Field is required"},s=function(e){return function(r){if(r&&r.length>e)return"Max length is ".concat(e," symbols")}}},9234:function(e,r){r.Z={formControl:"FormsControls_formControl__ZFy6E",error:"FormsControls_error__Ph5O6",formSummaryError:"FormsControls_formSummaryError__iiPnC",blink1:"FormsControls_blink1__XLlQ+"}},9196:function(e,r,n){e.exports=n.p+"static/media/defaultUserPhoto.48161ffe784f0589388e.jpg"},885:function(e,r,n){n.d(r,{Z:function(){return s}});var t=n(181);function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,s,i,a,o=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(t=i.call(n)).done)&&(o.push(t.value),o.length!==r);u=!0);}catch(l){c=!0,s=l}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(e,r)||(0,t.Z)(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=153.722f6276.chunk.js.map