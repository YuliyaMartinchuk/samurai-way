"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[400],{5103:function(e,r,n){n.r(r),n.d(r,{default:function(){return K}});var t=n(1413),s=n(5671),o=n(3144),i=n(136),u=n(2882),a=n(2791),c=n(364),l=n(9271),f=n(7781),d=n(3464),p=n(4165),h=n(5861),v=n(4461),m=n(3757),x=function(e){return{type:m.fw,payload:{status:e}}},j=n(2381),g=function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){var t;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.getProfile(e);case 2:t=r.sent,n((s=t.data,{type:m.cF,payload:{profile:s}}));case 4:case"end":return r.stop()}var s}),r)})));return function(e){return r.apply(this,arguments)}}()},y={profileUserCard:"Profileinfo_profileUserCard__Bk-h0",profileUserCardImage:"Profileinfo_profileUserCardImage__4kCgn",backgroundImage:"Profileinfo_backgroundImage__VKJ7F",avatar:"Profileinfo_avatar__yc+8Q",descriptionBlock:"Profileinfo_descriptionBlock__DV-dO",status:"Profileinfo_status__tfxjw",contacts:"Profileinfo_contacts__RvWpJ",description:"Profileinfo_description__wVWFe"},b=n.p+"static/media/backgroundImage.522c71481d4e78bb0ace.jpg",P=n(3445),k=n(9196),Z=n(885),_=n(184),w=function(e){var r=e.status,n=e.updateStatus,t=(0,a.useState)(!1),s=(0,Z.Z)(t,2),o=s[0],i=s[1],u=(0,a.useState)(r),c=(0,Z.Z)(u,2),l=c[0],f=c[1];(0,a.useEffect)((function(){f(r)}),[r]);return(0,_.jsxs)("div",{children:[!o&&(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:y.status,onDoubleClick:function(){i(!0)},children:e.status||"No status"})}),o&&(0,_.jsx)("div",{children:(0,_.jsx)("input",{className:y.status,autoFocus:!0,onBlur:function(){i(!1),n(l)},onChange:function(e){f(e.currentTarget.value)},value:l})})]})},C=function(e){var r=e.profile,n=e.status,t=e.updateStatus,s=e.isOwner,o=e.savePhoto;if(!r)return(0,_.jsx)(P.p,{});return(0,_.jsxs)("div",{className:y.profileUserCard,children:[(0,_.jsxs)("div",{className:y.profileUserCardImage,children:[(0,_.jsx)("img",{className:y.backgroundImage,src:b,alt:"background image"}),(0,_.jsx)("img",{className:y.avatar,src:(null===r||void 0===r?void 0:r.photos.large)||k,alt:"profile photo"}),(0,_.jsx)("div",{children:s&&(0,_.jsx)("input",{type:"file",onChange:function(e){e.target.files&&o(e.target.files[0])}})}),(0,_.jsx)("h1",{className:y.profileName,children:r.fullName})]}),(0,_.jsx)(w,{status:n,updateStatus:t})]})},F="MyPosts_postsBlock__zkHB8",N="MyPosts_posts__dhHo3",S="Post_item__uQCxA",I=function(e){return(0,_.jsxs)("div",{className:S,children:[(0,_.jsx)("img",{src:"https://i.pinimg.com/564x/1d/93/7f/1d937faee0026150d54b97df59c0af81.jpg"}),e.message,(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"like"})," ",e.likesCount]})]})},A=n(6139),O=n(704),U=n(5298),E=n(1117),T=(0,U.D)(10),M=(0,O.Z)({form:"addPostForm"})((function(e){return(0,_.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,_.jsx)("div",{children:(0,_.jsx)(A.Z,{placeholder:"Enter your post",name:"newPostText",component:E.gx,validate:[U.C,T]})}),(0,_.jsx)("div",{children:(0,_.jsx)("button",{children:"Add post"})})]})})),D=a.memo((function(e){console.log("render");var r=e.posts.map((function(e,r){return(0,_.jsx)(I,{message:e.message,likesCount:e.likesCount},r)}));return(0,_.jsxs)("div",{className:F,children:[(0,_.jsx)("h3",{children:"My posts"}),(0,_.jsx)(M,{onSubmit:function(r){e.addPost(r.newPostText)}}),(0,_.jsx)("div",{className:N,children:r})]})})),z=(0,c.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(r){e(function(e){return{type:m.RO,newPostText:e}}(r))}}}))(D),B=n(9234),R=(0,O.Z)({form:"edit-profile"})((function(e){var r=e.profile,n=e.handleSubmit,t=e.error;return(0,_.jsxs)("form",{className:y.descriptionBlock,onSubmit:n,children:[t&&(0,_.jsx)("div",{className:B.Z.formSummaryError,children:t}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Full name: "})," ",(0,E.Gr)("Full name","fullName",[],E.II)]}),(0,_.jsxs)("div",{className:y.description,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Looking for a job: "}),(0,E.Gr)("","lookingForAJob",[],E.II,{type:"checkbox"})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"My professional skills: "}),(0,E.Gr)("My professional skills","lookingForAJobDescription",[],E.gx)]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"About me: "}),(0,E.Gr)("About me","aboutMe",[],E.gx)]}),(null===r||void 0===r?void 0:r.contacts)&&(0,_.jsxs)("div",{className:y.contacts,children:[(0,_.jsx)("span",{children:"Contacts: "})," ",Object.keys(r.contacts).map((function(e){return(0,_.jsxs)("div",{children:[(0,_.jsxs)("span",{children:[e,": "]}),(0,E.Gr)(e,"contacts."+e,[],E.II)]},e)}))]})]}),(0,_.jsx)("div",{children:(0,_.jsx)("button",{children:"save"})})]})})),G=function(e){var r=e.contactTitle,n=e.contactValue;return(0,_.jsxs)("div",{children:[(0,_.jsxs)("span",{children:[r,": "]}),n]})},J=function(e){var r=e.profile,n=e.isOwner,t=e.goToEditMode;return(0,_.jsxs)("div",{className:y.descriptionBlock,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Full name: "}),null===r||void 0===r?void 0:r.fullName]}),(0,_.jsxs)("div",{className:y.description,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"Looking for a job: "})," ",null!==r&&void 0!==r&&r.lookingForAJob?"yes":"no"]}),(null===r||void 0===r?void 0:r.lookingForAJob)&&(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"My professional skills: "})," ",null===r||void 0===r?void 0:r.lookingForAJobDescription]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:"About me: "})," ",null===r||void 0===r?void 0:r.aboutMe]}),(null===r||void 0===r?void 0:r.contacts)&&(0,_.jsxs)("div",{className:y.contacts,children:[(0,_.jsx)("span",{children:"Contacts: "})," ",Object.keys(r.contacts).map((function(e){return(0,_.jsx)(G,{contactTitle:e,contactValue:r.contacts[e]},e)}))]})]}),(0,_.jsx)("div",{children:n&&(0,_.jsx)("button",{onClick:t,children:"edit"})})]})},q=function(e){var r=e.profile,n=e.isOwner,t=e.saveProfile,s=(0,a.useState)(!1),o=(0,Z.Z)(s,2),i=o[0],u=o[1];if(!r)return(0,_.jsx)(P.p,{});return(0,_.jsxs)("div",{className:y.profileUserCard,children:[(0,_.jsx)("h3",{children:"About Me"}),i?(0,_.jsx)(R,{profile:r,initialValues:r,onSubmit:function(e){t(e).then((function(){return u(!1)}))}}):(0,_.jsx)(J,{profile:r,isOwner:n,goToEditMode:function(){u(!0)}})]})},V=function(e){e.users;return(0,_.jsx)("div",{className:y.profileUserCard,children:(0,_.jsx)("h3",{children:"Friends"})})},L=function(e){var r=e.profile,n=e.isOwner,t=e.saveProfile,s=e.users;return(0,_.jsxs)("div",{children:[(0,_.jsx)(q,{profile:r,isOwner:n,saveProfile:t}),(0,_.jsx)(V,{users:s})]})},Q="Profile_PostsAndSidebarContainer__ONN9F",W=function(e){var r=e.profile,n=e.status,t=e.updateStatus,s=e.isOwner,o=e.savePhoto,i=e.saveProfile,u=e.users;return(0,_.jsxs)("div",{children:[(0,_.jsx)(C,{profile:r,status:n,updateStatus:t,isOwner:s,savePhoto:o}),(0,_.jsxs)("div",{className:Q,children:[(0,_.jsx)("div",{children:(0,_.jsx)(z,{})}),(0,_.jsx)("div",{children:(0,_.jsx)(L,{profile:r,isOwner:s,saveProfile:i,users:u})})]})]})},$=n(2505),H=function(e){(0,i.Z)(n,e);var r=(0,u.Z)(n);function n(){return(0,s.Z)(this,n),r.apply(this,arguments)}return(0,o.Z)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,r,n){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,_.jsx)(W,(0,t.Z)((0,t.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,users:this.props.users}))}}]),n}(a.Component),K=(0,f.qC)((0,c.$j)((function(e){return{profilePage:e.profilePage,profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth,users:(0,$.Rf)(e)}}),{getUserProfile:g,getUserStatus:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){var t;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.getStatus(e);case 2:t=r.sent,n(x(t.data));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},updateStatus:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.updateStatus(e);case 2:0===r.sent.data.resultCode&&n(x(e));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},savePhoto:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n){var t;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.FZ.savePhoto(e);case 2:0===(t=r.sent).data.resultCode&&n((s=t.data.data.photos,{type:m.Wj,payload:{photos:s}}));case 4:case"end":return r.stop()}var s}),r)})));return function(e){return r.apply(this,arguments)}}()},saveProfile:function(e){return function(){var r=(0,h.Z)((0,p.Z)().mark((function r(n,t){var s,o;return(0,p.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=t().auth.userId){r.next=4;break}return console.warn("userId not found"),r.abrupt("return");case 4:return r.next=6,v.FZ.saveProfile(e);case 6:if(0!==(o=r.sent).data.resultCode){r.next=11;break}n(g(s)),r.next=13;break;case 11:return n((0,j.GK)("edit-profile",{_error:o.data.messages[0]||"Incorrect data"})),r.abrupt("return",Promise.reject(o.data.messages[0]));case 13:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}()}}),l.EN,d.F)(H)},1117:function(e,r,n){n.d(r,{Gr:function(){return p},II:function(){return d},gx:function(){return f}});var t=n(6459),s=n(1413),o=n(5987),i=(n(2791),n(6139)),u=n(9234),a=n(184),c=["input","meta","FormType"],l=function(e){var r=e.input,n=e.meta,t=e.FormType,i=(0,o.Z)(e,c),l=n.error&&n.touched;return(0,a.jsxs)("div",{className:u.Z.formControl+" "+(l?u.Z.error:""),children:[(0,a.jsx)("div",{children:(0,a.jsx)(t,(0,s.Z)((0,s.Z)({},r),i))}),l&&(0,a.jsx)("span",{children:n.error})]})},f=function(e){var r=Object.assign({},((0,t.Z)(e),e));return(0,a.jsx)(l,(0,s.Z)((0,s.Z)({},r),{},{FormType:"textarea"}))},d=function(e){var r=Object.assign({},((0,t.Z)(e),e));return(0,a.jsx)(l,(0,s.Z)((0,s.Z)({},r),{},{FormType:"input"}))};function p(e,r,n,t,o){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,a.jsxs)("div",{className:u.Z.createFieldRoot,children:[(0,a.jsx)(i.Z,(0,s.Z)({placeholder:e,name:r,component:t,validate:n},o))," ",c]})}},3464:function(e,r,n){n.d(r,{F:function(){return l}});var t=n(1413),s=n(5987),o=n(9271),i=n(364),u=(n(2791),n(184)),a=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function l(e){return(0,i.$j)(c)((function(r){var n=r.isAuth,i=(0,s.Z)(r,a);return n?(0,u.jsx)(e,(0,t.Z)({},i)):(0,u.jsx)(o.l_,{to:"/login"})}))}},2505:function(e,r,n){n.d(r,{FZ:function(){return f},yg:function(){return p},ab:function(){return d},b7:function(){return c},qZ:function(){return l},Rf:function(){return a}});var t="NOT_FOUND";var s=function(e,r){return e===r};function o(e,r){var n="object"===typeof r?r:{equalityCheck:r},o=n.equalityCheck,i=void 0===o?s:o,u=n.maxSize,a=void 0===u?1:u,c=n.resultEqualityCheck,l=function(e){return function(r,n){if(null===r||null===n||r.length!==n.length)return!1;for(var t=r.length,s=0;s<t;s++)if(!e(r[s],n[s]))return!1;return!0}}(i),f=1===a?function(e){var r;return{get:function(n){return r&&e(r.key,n)?r.value:t},put:function(e,n){r={key:e,value:n}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}}(l):function(e,r){var n=[];function s(e){var s=n.findIndex((function(n){return r(e,n.key)}));if(s>-1){var o=n[s];return s>0&&(n.splice(s,1),n.unshift(o)),o.value}return t}return{get:s,put:function(r,o){s(r)===t&&(n.unshift({key:r,value:o}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(a,l);function d(){var r=f.get(arguments);if(r===t){if(r=e.apply(null,arguments),c){var n=f.getEntries().find((function(e){return c(e.value,r)}));n&&(r=n.value)}f.put(arguments,r)}return r}return d.clearCache=function(){return f.clear()},d}function i(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];return function(){for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];var o,i=0,u={memoizeOptions:void 0},a=t.pop();if("object"===typeof a&&(u=a,a=t.pop()),"function"!==typeof a)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof a+"]");var c=u.memoizeOptions,l=void 0===c?n:c,f=Array.isArray(l)?l:[l],d=function(e){var r=Array.isArray(e[0])?e[0]:e;if(!r.every((function(e){return"function"===typeof e}))){var n=r.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return r}(t),p=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(f)),h=e((function(){for(var e=[],r=d.length,n=0;n<r;n++)e.push(d[n].apply(null,arguments));return o=p.apply(null,e)}));return Object.assign(h,{resultFunc:a,memoizedResultFunc:p,dependencies:d,lastResult:function(){return o},recomputations:function(){return i},resetRecomputations:function(){return i=0}}),h}}var u=i(o),a=u((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),c=function(e){return e.usersPage.pageSize},l=function(e){return e.usersPage.totalUsersCount},f=function(e){return e.usersPage.currentPage},d=function(e){return e.usersPage.isFetching},p=function(e){return e.usersPage.followingInProgress}},5298:function(e,r,n){n.d(r,{C:function(){return t},D:function(){return s}});var t=function(e){if(!e)return"Field is required"},s=function(e){return function(r){if(r&&r.length>e)return"Max length is ".concat(e," symbols")}}},9234:function(e,r){r.Z={formControl:"FormsControls_formControl__ZFy6E",error:"FormsControls_error__Ph5O6",formSummaryError:"FormsControls_formSummaryError__iiPnC",blink1:"FormsControls_blink1__XLlQ+"}},9196:function(e,r,n){e.exports=n.p+"static/media/defaultUserPhoto.48161ffe784f0589388e.jpg"},885:function(e,r,n){n.d(r,{Z:function(){return s}});var t=n(181);function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,s,o,i,u=[],a=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;a=!1}else for(;!(a=(t=o.call(n)).done)&&(u.push(t.value),u.length!==r);a=!0);}catch(l){c=!0,s=l}finally{try{if(!a&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw s}}return u}}(e,r)||(0,t.Z)(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=400.a2011c97.chunk.js.map